import{d as E,w as L,e as x,f as n,g as r,u as o,j as i,t as p,i as a,O as R,o as d,c as f,F,l as j,n as w,J as A,k as q,m as G,v as W,q as z,a as b,s as V}from"./app-Cnu1gOwx.js";import{_ as S}from"./index-ZhNFNWlx.js";import{_ as H,a as K}from"./DialogContent.vue_vue_type_script_setup_true_lang-BRP34PkQ.js";import{_ as X,a as J,b as Q}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Crk5yDdn.js";import{_ as Z}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DLXKOOgf.js";import{I as Y,a as ee}from"./lucide-vue-next-CiKiUD8U.js";import{_ as ae}from"./Input.vue_vue_type_script_setup_true_lang-BjujaZ9W.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-mTSbsMtz.js";import{u as te}from"./useBookmarksStore-CqZ8Hg9i.js";import{X as oe}from"./x-DPYUiTTF.js";import{U as se}from"./upload-DQ3SgVup.js";import{I as le}from"./panels-top-left-52ka1cSQ.js";const re={class:"grid gap-2"},ne={class:"grid gap-2"},ie={class:"grid max-h-[200px] grid-cols-8 gap-2 overflow-y-auto rounded-md border p-3"},ue=["onClick","title"],ce={class:"grid gap-2"},de={class:"grid grid-cols-11 gap-2 rounded-md border p-3"},me=["onClick","title"],ge={class:"grid gap-4 border-t pt-4"},pe={class:"grid gap-2"},fe={key:0,class:"relative rounded-lg overflow-hidden border bg-muted aspect-video"},ve=["src"],be={key:1,class:"relative"},_e={class:"text-sm text-muted-foreground"},ke={key:2,class:"text-sm text-destructive"},ye={class:"grid gap-2"},he={class:"flex items-center justify-between"},Ce={class:"flex w-full items-center justify-between"},xe={key:1},we={class:"flex gap-2"},Oe=E({__name:"CreateCollectionDialog",setup(Se){const{state:v,closeCollectionModal:k}=te(),I=z({get:()=>v.isCollectionModalOpen,set:l=>{l||k()}}),y=z(()=>!!v.editingCollection),s=b({name:"",icon:"Folder",color:"slate",background_image:"",background_opacity:100}),h=b(!1),m=b(""),g=b(""),u=b(null),D=["Folder","Bookmark","Palette","Code","Wrench","BookOpen","Sparkles","Star","Heart","Cloud","Camera","Gift","Globe","ImageIcon","Layers","Mail","Monitor","Music","Phone","Play","Shield","ShoppingCart","Smartphone","Speaker","Sun","Terminal","Video","Zap","Activity","Anchor","Award","Briefcase","Coffee","Compass","Cpu","CreditCard","Database","Droplet","Eye","Flag","Github","GraduationCap","Home","Key","LifeBuoy","Lock","Map","Mic","Package","PenTool","Rocket","Search","Server","Settings","Share2","Tag","Target","Thermometer","ThumbsUp","Trophy","Tv","Umbrella","User","Watch"],N=[{name:"slate",class:"bg-slate-500"},{name:"gray",class:"bg-gray-500"},{name:"zinc",class:"bg-zinc-500"},{name:"neutral",class:"bg-neutral-500"},{name:"stone",class:"bg-stone-500"},{name:"red",class:"bg-red-500"},{name:"orange",class:"bg-orange-500"},{name:"amber",class:"bg-amber-500"},{name:"yellow",class:"bg-yellow-500"},{name:"lime",class:"bg-lime-500"},{name:"green",class:"bg-green-500"},{name:"emerald",class:"bg-emerald-500"},{name:"teal",class:"bg-teal-500"},{name:"cyan",class:"bg-cyan-500"},{name:"sky",class:"bg-sky-500"},{name:"blue",class:"bg-blue-500"},{name:"indigo",class:"bg-indigo-500"},{name:"violet",class:"bg-violet-500"},{name:"purple",class:"bg-purple-500"},{name:"fuchsia",class:"bg-fuchsia-500"},{name:"pink",class:"bg-pink-500"},{name:"rose",class:"bg-rose-500"}];L(()=>v.editingCollection,l=>{l?(s.value={name:l.name,icon:l.icon||"Folder",color:l.color||"slate",background_image:l.background_image||"",background_opacity:l.background_opacity??100},g.value=l.background_image||""):(s.value={name:"",icon:"Folder",color:"slate",background_image:"",background_opacity:100},g.value=""),m.value=""},{immediate:!0});const O=async l=>{const t=l.target.files?.[0];if(!t)return;m.value="";const c=new Image;c.onload=async()=>{if(c.width<1920||c.height<1080){m.value=`Image must be at least 1920x1080 pixels. Current size: ${c.width}x${c.height}`,u.value&&(u.value.value="");return}h.value=!0;const U=new FormData;U.append("image",t);try{const B=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),M=await fetch("/bookmarks/upload-image",{method:"POST",body:U,headers:{"X-CSRF-TOKEN":B||"",Accept:"application/json"}}),C=await M.json();if(!M.ok){m.value=C.error||"Upload failed",u.value&&(u.value.value="");return}s.value.background_image=C.url,g.value=C.url}catch{m.value="Upload failed. Please try again.",u.value&&(u.value.value="")}finally{h.value=!1}},c.onerror=()=>{m.value="Invalid image file",u.value&&(u.value.value="")},c.src=URL.createObjectURL(t)},$=()=>{s.value.background_image="",g.value="",u.value&&(u.value.value="")},T=()=>{y.value&&v.editingCollection?V.put(`/collections/${v.editingCollection.id}`,s.value,{onSuccess:()=>k()}):V.post("/collections",s.value,{onSuccess:()=>k()})},P=l=>l==="ImageIcon"?le:Y[l]||ee;return(l,e)=>(d(),x(o(K),{open:I.value,"onUpdate:open":e[2]||(e[2]=t=>I.value=t)},{default:n(()=>[r(o(H),{class:"sm:max-w-[500px]"},{default:n(()=>[r(o(X),null,{default:n(()=>[r(o(J),null,{default:n(()=>[i(p(y.value?"Edit Collection":"New Collection"),1)]),_:1}),r(o(Q),null,{default:n(()=>[i(p(y.value?"Change the details of your collection.":"Create a new collection to organize your bookmarks."),1)]),_:1})]),_:1}),a("form",{onSubmit:R(T,["prevent"]),class:"grid gap-6 py-4"},[a("div",re,[r(o(_),{htmlFor:"name"},{default:n(()=>[...e[3]||(e[3]=[i("Collection Name",-1)])]),_:1}),r(o(ae),{id:"name",modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.name=t),placeholder:"Work Resources, Inspiration, etc.",required:"",autofocus:""},null,8,["modelValue"])]),a("div",ne,[r(o(_),null,{default:n(()=>[...e[4]||(e[4]=[i("Icon",-1)])]),_:1}),a("div",ie,[(d(),f(F,null,j(D,t=>a("button",{key:t,type:"button",class:w(["flex size-10 items-center justify-center rounded-md border transition-all hover:bg-muted",{"border-primary bg-primary/10 ring-2 ring-primary":s.value.icon===t}]),onClick:c=>s.value.icon=t,title:t},[(d(),x(A(P(t)),{class:"size-5"}))],10,ue)),64))])]),a("div",ce,[r(o(_),null,{default:n(()=>[...e[5]||(e[5]=[i("Color Theme",-1)])]),_:1}),a("div",de,[(d(),f(F,null,j(N,t=>a("button",{key:t.name,type:"button",class:w(["size-6 rounded-full border border-white/20 transition-transform hover:scale-125 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",[t.class,{"ring-2 ring-primary ring-offset-2 scale-110":s.value.color===t.name}]]),onClick:c=>s.value.color=t.name,title:t.name},null,10,me)),64))])]),a("div",ge,[a("div",pe,[r(o(_),{for:"background_image"},{default:n(()=>[...e[6]||(e[6]=[i("Background Image",-1)])]),_:1}),g.value?(d(),f("div",fe,[a("img",{src:g.value,alt:"Background preview",class:"w-full h-full object-cover"},null,8,ve),a("button",{type:"button",onClick:$,class:"absolute top-2 right-2 p-1.5 rounded-full bg-destructive text-destructive-foreground hover:bg-destructive/90 transition-colors"},[r(o(oe),{class:"size-4"})])])):(d(),f("div",be,[a("input",{ref_key:"fileInput",ref:u,type:"file",id:"background_image",accept:"image/jpeg,image/png,image/jpg,image/webp",onChange:O,class:"hidden"},null,544),a("label",{for:"background_image",class:w(["flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer bg-muted/30 hover:bg-muted/50 transition-colors",{"opacity-50 cursor-not-allowed":h.value}])},[r(o(se),{class:"size-8 mb-2 text-muted-foreground"}),a("p",_e,p(h.value?"Uploading...":"Click to upload image"),1),e[7]||(e[7]=a("p",{class:"text-xs text-muted-foreground mt-1"}," Min: 1920x1080px â€¢ Max: 5MB ",-1))],2)])),m.value?(d(),f("p",ke,p(m.value),1)):q("",!0),e[8]||(e[8]=a("p",{class:"text-xs text-muted-foreground"},[i(" We recommend "),a("a",{href:"https://www.freepik.com",target:"_blank",class:"underline hover:text-foreground transition-colors"},"Freepik"),i(" for high-quality stock images ")],-1))]),a("div",ye,[a("div",he,[r(o(_),{for:"background_opacity"},{default:n(()=>[i("Background Opacity ("+p(s.value.background_opacity)+"%)",1)]),_:1})]),G(a("input",{id:"background_opacity",type:"range","onUpdate:modelValue":e[1]||(e[1]=t=>s.value.background_opacity=t),min:"0",max:"100",step:"1",class:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"},null,512),[[W,s.value.background_opacity,void 0,{number:!0}]])])])],32),r(o(Z),null,{default:n(()=>[a("div",Ce,[s.value.background_image?(d(),x(o(S),{key:0,type:"button",variant:"outline",onClick:$,class:"text-destructive hover:text-destructive"},{default:n(()=>[...e[9]||(e[9]=[i(" Remove Image ",-1)])]),_:1})):(d(),f("div",xe)),a("div",we,[r(o(S),{type:"button",variant:"outline",onClick:o(k)},{default:n(()=>[...e[10]||(e[10]=[i(" Cancel ",-1)])]),_:1},8,["onClick"]),r(o(S),{type:"submit",onClick:T},{default:n(()=>[i(p(y.value?"Save Changes":"Create Collection"),1)]),_:1})])])]),_:1})]),_:1})]),_:1},8,["open"]))}});export{Oe as _};
