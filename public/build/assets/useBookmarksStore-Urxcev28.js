import{a as ce,i as ue,g as C}from"./Presence-D2IBotXA.js";import{l as de,k as fe,i as N,m as V,f as pe,u as ve,o as me,n as ye,p as ge}from"./index-BSvhixD8.js";import{q as P,a as T,w as Z,C as A,D as he,a5 as D,W as F,d as q,o as j,e as H,f as ee,r as Y,u as B,H as Se,y as z,ac as be,k as ke,s as E}from"./app-DNu05MVj.js";import{u as te}from"./useForwardExpose-Bxo7tXLa.js";import{P as oe}from"./Primitive-SYHey8E-.js";function se(e,t,o){const r=o.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:o});t&&r.addEventListener(e,t,{once:!0}),r.dispatchEvent(i)}function I(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function $(e,t,o=".",r){if(!I(t))return $(e,{},o,r);const i=Object.assign({},t);for(const l in e){if(l==="__proto__"||l==="constructor")continue;const f=e[l];f!=null&&(r&&r(i,l,f,o)||(Array.isArray(f)&&Array.isArray(i[l])?i[l]=[...f,...i[l]]:I(f)&&I(i[l])?i[l]=$(f,i[l],(o?`${o}.`:"")+l.toString(),r):i[l]=f))}return i}function Ee(e){return(...t)=>t.reduce((o,r)=>$(o,r,"",e),{})}const we=Ee(),Oe=fe(()=>{const e=T(new Map),t=T(),o=P(()=>{for(const f of e.value.values())if(f)return!0;return!1}),r=ce({scrollBody:T(!0)});let i=null;const l=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",V&&i?.(),t.value=void 0};return Z(o,(f,m)=>{if(!N)return;if(!f){m&&l();return}t.value===void 0&&(t.value=document.body.style.overflow);const y=window.innerWidth-document.documentElement.clientWidth,S={padding:y,margin:0},u=r.scrollBody?.value?typeof r.scrollBody.value=="object"?we({padding:r.scrollBody.value.padding===!0?y:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?y:r.scrollBody.value.margin},S):S:{padding:0,margin:0};y>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${y}px`),document.body.style.overflow="hidden"),V&&(i=pe(document,"touchmove",c=>_e(c),{passive:!1})),A(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function it(e){const t=Math.random().toString(36).substring(2,7),o=Oe();o.value.set(t,e??!1);const r=P({get:()=>o.value.get(t)??!1,set:i=>o.value.set(t,i)});return de(()=>{o.value.delete(t)}),r}function re(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const o=e.parentNode;return!(o instanceof Element)||o.tagName==="BODY"?!1:re(o)}}function _e(e){const t=e||window.event,o=t.target;return o instanceof Element&&re(o)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}var Ce=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},M=new WeakMap,W=new WeakMap,x={},R=0,ne=function(e){return e&&(e.host||ne(e.parentNode))},Te=function(e,t){return t.map(function(o){if(e.contains(o))return o;var r=ne(o);return r&&e.contains(r)?r:(console.error("aria-hidden",o,"in not contained inside",e,". Doing nothing"),null)}).filter(function(o){return!!o})},Pe=function(e,t,o,r){var i=Te(t,Array.isArray(e)?e:[e]);x[o]||(x[o]=new WeakMap);var l=x[o],f=[],m=new Set,y=new Set(i),S=function(c){!c||m.has(c)||(m.add(c),S(c.parentNode))};i.forEach(S);var u=function(c){!c||y.has(c)||Array.prototype.forEach.call(c.children,function(p){if(m.has(p))u(p);else try{var d=p.getAttribute(r),g=d!==null&&d!=="false",h=(M.get(p)||0)+1,k=(l.get(p)||0)+1;M.set(p,h),l.set(p,k),f.push(p),h===1&&g&&W.set(p,!0),k===1&&p.setAttribute(o,"true"),g||p.setAttribute(r,"true")}catch(O){console.error("aria-hidden: cannot operate on ",p,O)}})};return u(t),m.clear(),R++,function(){f.forEach(function(c){var p=M.get(c)-1,d=l.get(c)-1;M.set(c,p),l.set(c,d),p||(W.has(c)||c.removeAttribute(r),W.delete(c)),d||c.removeAttribute(o)}),R--,R||(M=new WeakMap,M=new WeakMap,W=new WeakMap,x={})}},Be=function(e,t,o){o===void 0&&(o="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=Ce(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Pe(r,i,o,"aria-hidden")):function(){return null}};function lt(e){let t;Z(()=>ve(e),o=>{o?t=Be(o):t&&t()}),he(()=>{t&&t()})}const Me="dismissableLayer.pointerDownOutside",De="dismissableLayer.focusOutside";function ae(e,t){const o=t.closest("[data-dismissable-layer]"),r=e.dataset.dismissableLayer===""?e:e.querySelector("[data-dismissable-layer]"),i=Array.from(e.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(o&&(r===o||i.indexOf(r)<i.indexOf(o)))}function Le(e,t,o=!0){const r=t?.value?.ownerDocument??globalThis?.document,i=T(!1),l=T(()=>{});return D(f=>{if(!N||!F(o))return;const m=async S=>{const u=S.target;if(!(!t?.value||!u)){if(ae(t.value,u)){i.value=!1;return}if(S.target&&!i.value){let p=function(){se(Me,e,c)};const c={originalEvent:S};S.pointerType==="touch"?(r.removeEventListener("click",l.value),l.value=p,r.addEventListener("click",l.value,{once:!0})):p()}else r.removeEventListener("click",l.value);i.value=!1}},y=window.setTimeout(()=>{r.addEventListener("pointerdown",m)},0);f(()=>{window.clearTimeout(y),r.removeEventListener("pointerdown",m),r.removeEventListener("click",l.value)})}),{onPointerDownCapture:()=>{F(o)&&(i.value=!0)}}}function Fe(e,t,o=!0){const r=t?.value?.ownerDocument??globalThis?.document,i=T(!1);return D(l=>{if(!N||!F(o))return;const f=async m=>{if(!t?.value)return;await A(),await A();const y=m.target;!t.value||!y||ae(t.value,y)||m.target&&!i.value&&se(De,e,{originalEvent:m})};r.addEventListener("focusin",f),l(()=>r.removeEventListener("focusin",f))}),{onFocusCapture:()=>{F(o)&&(i.value=!0)},onBlurCapture:()=>{F(o)&&(i.value=!1)}}}const w=z({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,originalBodyPointerEvents:void 0,branches:new Set});var Ae=q({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(e,{emit:t}){const o=e,r=t,{forwardRef:i,currentElement:l}=te(),f=P(()=>l.value?.ownerDocument??globalThis.document),m=P(()=>w.layersRoot),y=P(()=>l.value?Array.from(m.value).indexOf(l.value):-1),S=P(()=>w.layersWithOutsidePointerEventsDisabled.size>0),u=P(()=>{const d=Array.from(m.value),[g]=[...w.layersWithOutsidePointerEventsDisabled].slice(-1),h=d.indexOf(g);return y.value>=h}),c=Le(async d=>{const g=[...w.branches].some(h=>h?.contains(d.target));!u.value||g||(r("pointerDownOutside",d),r("interactOutside",d),await A(),d.defaultPrevented||r("dismiss"))},l),p=Fe(d=>{[...w.branches].some(h=>h?.contains(d.target))||(r("focusOutside",d),r("interactOutside",d),d.defaultPrevented||r("dismiss"))},l);return me("Escape",d=>{y.value===m.value.size-1&&(r("escapeKeyDown",d),d.defaultPrevented||r("dismiss"))}),D(d=>{l.value&&(o.disableOutsidePointerEvents&&(w.layersWithOutsidePointerEventsDisabled.size===0&&(w.originalBodyPointerEvents=f.value.body.style.pointerEvents,f.value.body.style.pointerEvents="none"),w.layersWithOutsidePointerEventsDisabled.add(l.value)),m.value.add(l.value),d(()=>{o.disableOutsidePointerEvents&&w.layersWithOutsidePointerEventsDisabled.size===1&&!ue(w.originalBodyPointerEvents)&&(f.value.body.style.pointerEvents=w.originalBodyPointerEvents)}))}),D(d=>{d(()=>{l.value&&(m.value.delete(l.value),w.layersWithOutsidePointerEventsDisabled.delete(l.value))})}),(d,g)=>(j(),H(B(oe),{ref:B(i),"as-child":d.asChild,as:d.as,"data-dismissable-layer":"",style:Se({pointerEvents:S.value?u.value?"auto":"none":void 0}),onFocusCapture:B(p).onFocusCapture,onBlurCapture:B(p).onBlurCapture,onPointerdownCapture:B(c).onPointerDownCapture},{default:ee(()=>[Y(d.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),ct=Ae;const We=ye(()=>T([]));function xe(){const e=We();return{add(t){const o=e.value[0];t!==o&&o?.pause(),e.value=Q(e.value,t),e.value.unshift(t)},remove(t){e.value=Q(e.value,t),e.value[0]?.resume()}}}function Q(e,t){const o=[...e],r=o.indexOf(t);return r!==-1&&o.splice(r,1),o}const K="focusScope.autoFocusOnMount",U="focusScope.autoFocusOnUnmount",X={bubbles:!1,cancelable:!0};function Ne(e,{select:t=!1}={}){const o=C();for(const r of e)if(_(r,{select:t}),C()!==o)return!0}function Ie(e){const t=ie(e),o=G(t,e),r=G(t.reverse(),e);return[o,r]}function ie(e){const t=[],o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)t.push(o.currentNode);return t}function G(e,t){for(const o of e)if(!Re(o,{upTo:t}))return o}function Re(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Ke(e){return e instanceof HTMLInputElement&&"select"in e}function _(e,{select:t=!1}={}){if(e&&e.focus){const o=C();e.focus({preventScroll:!0}),e!==o&&Ke(e)&&t&&e.select()}}var Ue=q({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const o=e,r=t,{currentRef:i,currentElement:l}=te(),f=T(null),m=xe(),y=z({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});D(u=>{if(!N)return;const c=l.value;if(!o.trapped)return;function p(k){if(y.paused||!c)return;const O=k.target;c.contains(O)?f.value=O:_(f.value,{select:!0})}function d(k){if(y.paused||!c)return;const O=k.relatedTarget;O!==null&&(c.contains(O)||_(f.value,{select:!0}))}function g(k){c.contains(f.value)||_(c)}document.addEventListener("focusin",p),document.addEventListener("focusout",d);const h=new MutationObserver(g);c&&h.observe(c,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",d),h.disconnect()})}),D(async u=>{const c=l.value;if(await A(),!c)return;m.add(y);const p=C();if(!c.contains(p)){const g=new CustomEvent(K,X);c.addEventListener(K,h=>r("mountAutoFocus",h)),c.dispatchEvent(g),g.defaultPrevented||(Ne(ie(c),{select:!0}),C()===p&&_(c))}u(()=>{c.removeEventListener(K,k=>r("mountAutoFocus",k));const g=new CustomEvent(U,X),h=k=>{r("unmountAutoFocus",k)};c.addEventListener(U,h),c.dispatchEvent(g),setTimeout(()=>{g.defaultPrevented||_(p??document.body,{select:!0}),c.removeEventListener(U,h),m.remove(y)},0)})});function S(u){if(!o.loop&&!o.trapped||y.paused)return;const c=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,p=C();if(c&&p){const d=u.currentTarget,[g,h]=Ie(d);g&&h?!u.shiftKey&&p===h?(u.preventDefault(),o.loop&&_(g,{select:!0})):u.shiftKey&&p===g&&(u.preventDefault(),o.loop&&_(h,{select:!0})):p===d&&u.preventDefault()}}return(u,c)=>(j(),H(B(oe),{ref_key:"currentRef",ref:i,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:S},{default:ee(()=>[Y(u.$slots,"default")]),_:3},8,["as-child","as"]))}}),ut=Ue;const dt="menu.itemSelect",J=["Enter"," "],$e=["ArrowDown","PageUp","Home"],qe=["ArrowUp","PageDown","End"],ft=[...$e,...qe];[...J],[...J];function pt(e){return e?"open":"closed"}function vt(e){const t=C();for(const o of e)if(o===t||(o.focus(),C()!==t))return}function je(e,t){const{x:o,y:r}=e;let i=!1;for(let l=0,f=t.length-1;l<t.length;f=l++){const m=t[l].x,y=t[l].y,S=t[f].x,u=t[f].y;y>r!=u>r&&o<(S-m)*(r-y)/(u-y)+m&&(i=!i)}return i}function mt(e,t){if(!t)return!1;const o={x:e.clientX,y:e.clientY};return je(o,t)}function yt(e){return e.pointerType==="mouse"}var He=q({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=ge();return(o,r)=>B(t)||o.forceMount?(j(),H(be,{key:0,to:o.to,disabled:o.disabled,defer:o.defer},[Y(o.$slots,"default")],8,["to","disabled","defer"])):ke("v-if",!0)}}),gt=He;const s=z({bookmarks:[],collections:[],tags:[],archivedBookmarks:[],trashedBookmarks:[],selectedCollection:"all",selectedTags:[],searchQuery:"",viewMode:"grid",sortBy:"date-newest",filterType:"all",pageMode:"index",editingBookmark:null,isBookmarkModalOpen:!1,editingCollection:null,isCollectionModalOpen:!1,isSearchModalOpen:!1,isPageSettingsModalOpen:!1,userPreferences:{}});function ht(e,t,o){if(s.bookmarks=e,s.collections=t,s.tags=o,s.selectedCollection==="all")s.sortBy=s.userPreferences.sort_all||"date-newest";else{const r=s.collections.find(i=>String(i.id)===s.selectedCollection);r&&(s.sortBy=r.sort_by||"date-newest")}}function St(e){s.userPreferences=e||{},s.selectedCollection==="all"&&(s.sortBy=s.userPreferences.sort_all||"date-newest"),s.viewMode=s.userPreferences.view_mode||"grid"}function bt(){return{state:s,setSelectedCollection:n=>{if(s.selectedCollection=n,n==="all")s.sortBy=s.userPreferences.sort_all||"date-newest";else{const a=s.collections.find(v=>String(v.id)===n);a&&(s.sortBy=a.sort_by||"date-newest")}},toggleTag:n=>{s.selectedTags.includes(n)?s.selectedTags=s.selectedTags.filter(a=>a!==n):s.selectedTags.push(n)},clearTags:()=>{s.selectedTags=[]},setSelectedTags:n=>{s.selectedTags=n},setSearchQuery:n=>{s.searchQuery=n},setViewMode:n=>{s.viewMode=n,E.post("/bookmarks/preferences",{view_mode:n},{preserveScroll:!0})},setSortBy:n=>{if(s.sortBy=n,s.selectedCollection==="all")E.post("/bookmarks/preferences",{sort_all:n},{preserveScroll:!0});else{const a=s.collections.find(v=>String(v.id)===s.selectedCollection);a&&typeof a.id=="number"&&(E.post(`/collections/${a.id}`,{_method:"put",sort_by:n},{preserveScroll:!0}),a.sort_by=n)}},setFilterType:n=>{s.filterType=n},toggleFavorite:n=>{const a=s.bookmarks.find(v=>v.id===n);if(a){const v=a.is_favorite;a.is_favorite=!v;const b=typeof n=="string"&&n.startsWith("company-")?`/bookmarks/company/${n}/favorite`:`/bookmarks/${n}`;E.post(b,{_method:b.includes("company")?"post":"put",is_favorite:a.is_favorite},{preserveScroll:!0,onError:()=>{a.is_favorite=v}})}},archiveBookmark:n=>{E.post(`/bookmarks/${n}/archive`,{},{preserveScroll:!0})},unarchiveBookmark:n=>{E.post(`/bookmarks/${n}/unarchive`,{},{preserveScroll:!0})},trashBookmark:n=>{E.post(`/bookmarks/${n}/trash`,{},{preserveScroll:!0})},restoreBookmark:n=>{E.post(`/bookmarks/${n}/restore`,{},{preserveScroll:!0})},deleteBookmark:n=>{E.delete(`/bookmarks/${n}`,{preserveScroll:!0})},deleteCollection:n=>{E.delete(`/collections/${n}`,{preserveScroll:!0,onSuccess:()=>{s.selectedCollection===String(n)&&(s.selectedCollection="all")}})},getFilteredBookmarks:()=>{let n;if(s.pageMode==="archive"?n=s.bookmarks.filter(a=>a.status==="archived"):s.pageMode==="trash"?n=s.bookmarks.filter(a=>a.status==="trashed"||a.deleted_at):n=s.bookmarks.filter(a=>(!a.status||a.status==="active")&&!a.deleted_at),s.selectedCollection!=="all"&&s.pageMode==="index"&&(n=n.filter(a=>a.collection_id==s.selectedCollection)),s.selectedTags.length>0&&(n=n.filter(a=>s.selectedTags.every(v=>a.tags.some(b=>b.id===v)))),s.searchQuery){const a=s.searchQuery.toLowerCase();n=n.filter(v=>v.title.toLowerCase().includes(a)||v.description&&v.description.toLowerCase().includes(a)||v.url.toLowerCase().includes(a))}switch(s.filterType==="favorites"?n=n.filter(a=>a.is_favorite):s.filterType==="with-tags"?n=n.filter(a=>a.tags.length>0):s.filterType==="without-tags"&&(n=n.filter(a=>a.tags.length===0)),s.sortBy){case"date-newest":return n.sort((a,v)=>new Date(v.created_at||0).getTime()-new Date(a.created_at||0).getTime());case"date-oldest":return n.sort((a,v)=>new Date(a.created_at||0).getTime()-new Date(v.created_at||0).getTime());case"alpha-az":return n.sort((a,v)=>a.title.localeCompare(v.title));case"alpha-za":return n.sort((a,v)=>v.title.localeCompare(a.title));case"custom":return n.sort((a,v)=>(a.order||0)-(v.order||0));default:return n}},setPageMode:n=>{s.pageMode=n},openBookmarkModal:(n=null)=>{s.editingBookmark=n,s.isBookmarkModalOpen=!0},closeBookmarkModal:()=>{s.editingBookmark=null,s.isBookmarkModalOpen=!1},openCollectionModal:(n=null)=>{s.editingCollection=n,s.isCollectionModalOpen=!0},closeCollectionModal:()=>{s.editingCollection=null,s.isCollectionModalOpen=!1},openSearch:()=>{s.isSearchModalOpen=!0},closeSearch:()=>{s.isSearchModalOpen=!1},toggleSearch:()=>{s.isSearchModalOpen=!s.isSearchModalOpen},reorderBookmarks:n=>{n.forEach((v,b)=>{const L=s.bookmarks.find(le=>String(le.id)===String(v.id));L&&(L.order=b)});const a=n.filter(v=>!v.is_company).map((v,b)=>({id:v.id,order:b}));a.length>0&&E.post("/bookmarks/reorder",{updates:a},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{}})},openPageSettings:()=>{s.isPageSettingsModalOpen=!0},closePageSettings:()=>{s.isPageSettingsModalOpen=!1},updatePageSettings:n=>{const a=s.collections.find(b=>String(b.id)===s.selectedCollection);if(s.selectedCollection==="all"||["archive","trash"].includes(s.pageMode)||s.filterType==="favorites"||a&&typeof a.id!="number"){let b="all";s.filterType==="favorites"?b="favorites":s.pageMode==="archive"?b="archive":s.pageMode==="trash"?b="trash":a&&(b=String(a.id));const L={...s.userPreferences.backgrounds||{},[b]:n};E.post("/bookmarks/preferences",{backgrounds:L},{preserveScroll:!0,onSuccess:()=>{s.userPreferences.backgrounds=L}})}else a&&typeof a.id=="number"&&E.post(`/collections/${a.id}`,{_method:"put",...n},{preserveScroll:!0,onSuccess:()=>{Object.assign(a,n)}})}}}export{ct as D,ut as F,dt as I,qe as L,J as S,gt as T,it as a,mt as b,ft as c,yt as d,lt as e,vt as f,pt as g,ht as i,St as s,bt as u};
