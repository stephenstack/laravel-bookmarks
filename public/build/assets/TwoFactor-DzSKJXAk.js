import{d as x,c as d,n as z,u as e,r as D,o as s,e as m,f as r,g as t,j as p,t as k,i as a,F as _,l as T,C as K,a as w,Y as W,z as te,I as ae,U as q,V as B,k as se,A as G,L as re,Z as oe,w as ne,G as le,_ as ie,B as ue,h as de,J as ce,K as fe}from"./app-BM4wth8d.js";import{r as pe,s as ve,q as me,c as ye,d as be,f as _e,_ as ge,a as he,g as we,h as xe}from"./Layout.vue_vue_type_script_setup_true_lang-CBPg5giI.js";import{c as O}from"./utils-B2lt5qvW.js";import{c as Y,P as Ce}from"./Primitive-BlbzW2vx.js";import{C as ke,L as $e,a as Se,E as Fe,R as Te,S as Ae,c as Q,b as Re}from"./shield-ban-CVsEu2F2.js";import{_ as h}from"./index-BLruGDsa.js";import{_ as Ee,b as Ve,c as je,a as qe,d as ze}from"./CardTitle.vue_vue_type_script_setup_true_lang-C0MSoS30.js";import{b as De,r as Be}from"./index-CdEUOKD_.js";import{_ as Oe}from"./InputError.vue_vue_type_script_setup_true_lang-U0R2ZRY5.js";import{a as Me,_ as Le}from"./DialogContent.vue_vue_type_script_setup_true_lang-BWxvEzB-.js";import{_ as Pe,a as Ke,b as Ie}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DGL_xPNe.js";import{_ as Ne,a as Ue,b as Qe}from"./InputOTPSlot.vue_vue_type_script_setup_true_lang-mGRrzsHI.js";import{_ as H}from"./Spinner.vue_vue_type_script_setup_true_lang-B3mQPelj.js";import{C as He}from"./check-CVzbhP7H.js";import{C as Je}from"./copy-DU36Oqja.js";import{_ as We}from"./AppLayout.vue_vue_type_script_setup_true_lang-uhz7W47b.js";import"./Separator.vue_vue_type_script_setup_true_lang-umnQTxNc.js";import"./index-BDqSilVs.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BHzz0xJo.js";import"./useForwardPropsEmits-CM88rfjM.js";import"./x-w-kZtz8O.js";import"./useForwardExpose-CcqKqirt.js";import"./Presence-XpswKYIx.js";import"./useBookmarksStore-UPt413RC.js";import"./createLucideIcon-h0D94ASB.js";import"./SidebarProvider.vue_vue_type_script_setup_true_lang-YD9Oh4Ak.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-B0jzV3rn.js";import"./RovingFocusGroup-CKn1ehMZ.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-2YHt835v.js";import"./VisuallyHidden-8QNE3Wo9.js";import"./DropdownMenuLabel.vue_vue_type_script_setup_true_lang-B6AoE0BV.js";import"./settings-DgS13b6o.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-zoUBjR1k.js";import"./index-konv9vR_.js";import"./loader-circle-DXSto-fF.js";import"./panel-left-open-D36c8jFx.js";import"./settings-2-2_Oxji1u.js";import"./SidebarTrigger.vue_vue_type_script_setup_true_lang-Dy9LgDjR.js";import"./CommandMenu-B7UZM8Sx.js";import"./external-link-Cp1QdOL3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Ge=x({__name:"Alert",props:{class:{},variant:{}},setup(l){const n=l;return(i,u)=>(s(),d("div",{"data-slot":"alert",class:z(e(O)(e(Xe)({variant:l.variant}),n.class)),role:"alert"},[D(i.$slots,"default")],2))}}),Ye=x({__name:"AlertDescription",props:{class:{}},setup(l){const n=l;return(i,u)=>(s(),d("div",{"data-slot":"alert-description",class:z(e(O)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",n.class))},[D(i.$slots,"default")],2))}}),Ze=x({__name:"AlertTitle",props:{class:{}},setup(l){const n=l;return(i,u)=>(s(),d("div",{"data-slot":"alert-title",class:z(e(O)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",n.class))},[D(i.$slots,"default")],2))}}),Xe=Y("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}}),et={class:"list-inside list-disc text-sm"},Z=x({__name:"AlertError",props:{errors:{},title:{default:"Something went wrong."}},setup(l){const n=l,i=K(()=>Array.from(new Set(n.errors)));return(u,c)=>(s(),m(e(Ge),{variant:"destructive"},{default:r(()=>[t(e(ke),{class:"size-4"}),t(e(Ze),null,{default:r(()=>[p(k(l.title),1)]),_:1}),t(e(Ye),null,{default:r(()=>[a("ul",et,[(s(!0),d(_,null,T(i.value,(g,o)=>(s(),d("li",{key:o},k(g),1))),128))])]),_:1})]),_:1}))}}),P=async l=>{const n=await fetch(l,{headers:{Accept:"application/json"}});if(!n.ok)throw new Error(`Failed to fetch: ${n.status}`);return n.json()},E=w([]),S=w(null),F=w(null),j=w([]),tt=K(()=>F.value!==null&&S.value!==null),I=()=>{const l=async()=>{try{const{svg:v}=await P(me.url());F.value=v}catch{E.value.push("Failed to fetch QR code"),F.value=null}},n=async()=>{try{const{secretKey:v}=await P(ve.url());S.value=v}catch{E.value.push("Failed to fetch a setup key"),S.value=null}},i=()=>{S.value=null,F.value=null,u()},u=()=>{E.value=[]};return{qrCodeSvg:F,manualSetupKey:S,recoveryCodesList:j,errors:E,hasSetupData:tt,clearSetupData:i,clearErrors:u,clearTwoFactorAuthData:()=>{i(),u(),j.value=[]},fetchQrCode:l,fetchSetupKey:n,fetchSetupData:async()=>{try{u(),await Promise.all([l(),n()])}catch{F.value=null,S.value=null}},fetchRecoveryCodes:async()=>{try{u(),j.value=await P(pe.url())}catch{E.value.push("Failed to fetch recovery codes"),j.value=[]}}}},at={class:"flex flex-col gap-3 select-none sm:flex-row sm:items-center sm:justify-between"},st={key:0,class:"mt-6"},rt={key:1,class:"mt-3 space-y-3"},ot={key:0,class:"space-y-2"},nt=x({__name:"TwoFactorRecoveryCodes",setup(l){const{recoveryCodesList:n,fetchRecoveryCodes:i,errors:u}=I(),c=w(!1),g=W("recoveryCodeSectionRef"),o=async()=>{!c.value&&!n.value.length&&await i(),c.value=!c.value,c.value&&(await G(),g.value?.scrollIntoView({behavior:"smooth"}))};return te(async()=>{n.value.length||await i()}),(v,y)=>(s(),m(e(Ee),{class:"w-full"},{default:r(()=>[t(e(qe),null,{default:r(()=>[t(e(Ve),{class:"flex gap-3"},{default:r(()=>[t(e($e),{class:"size-4"}),y[0]||(y[0]=p("2FA Recovery Codes ",-1))]),_:1}),t(e(je),null,{default:r(()=>[...y[1]||(y[1]=[p(" Recovery codes let you regain access if you lose your 2FA device. Store them in a secure password manager. ",-1)])]),_:1})]),_:1}),t(e(ze),null,{default:r(()=>[a("div",at,[t(e(h),{onClick:o,class:"w-fit"},{default:r(()=>[(s(),m(ae(c.value?e(Se):e(Fe)),{class:"size-4"})),p(" "+k(c.value?"Hide":"View")+" Recovery Codes ",1)]),_:1}),c.value&&e(n).length?(s(),m(e(q),B({key:0},e(ye).form(),{method:"post",options:{preserveScroll:!0},onSuccess:e(i)}),{default:r(({processing:C})=>[t(e(h),{variant:"secondary",type:"submit",disabled:C},{default:r(()=>[t(e(Te)),y[2]||(y[2]=p(" Regenerate Codes ",-1))]),_:1},8,["disabled"])]),_:1},16,["onSuccess"])):se("",!0)]),a("div",{class:z(["relative overflow-hidden transition-all duration-300",c.value?"h-auto opacity-100":"h-0 opacity-0"])},[e(u)?.length?(s(),d("div",st,[t(Z,{errors:e(u)},null,8,["errors"])])):(s(),d("div",rt,[a("div",{ref_key:"recoveryCodeSectionRef",ref:g,class:"grid gap-1 rounded-lg bg-muted p-4 font-mono text-sm"},[e(n).length?(s(!0),d(_,{key:1},T(e(n),(C,V)=>(s(),d("div",{key:V},k(C),1))),128)):(s(),d("div",ot,[(s(),d(_,null,T(8,C=>a("div",{key:C,class:"h-4 animate-pulse rounded bg-muted-foreground/20"})),64))]))],512),y[3]||(y[3]=a("p",{class:"text-xs text-muted-foreground select-none"},[p(" Each recovery code can be used once to access your account and will be removed after use. If you need more, click "),a("span",{class:"font-bold"},"Regenerate Codes"),p(" above. ")],-1))]))],2)]),_:1})]),_:1}))}}),lt={class:"mb-3 w-auto rounded-full border border-border bg-card p-0.5 shadow-sm"},it={class:"relative overflow-hidden rounded-full border border-border bg-muted p-2.5"},ut={class:"absolute inset-0 grid grid-cols-5 opacity-50"},dt={class:"absolute inset-0 grid grid-rows-5 opacity-50"},ct={class:"relative flex w-auto flex-col items-center justify-center space-y-5"},ft={class:"relative mx-auto flex max-w-md items-center overflow-hidden"},pt={class:"relative mx-auto aspect-square w-64 overflow-hidden rounded-lg border border-border"},vt={key:0,class:"absolute inset-0 z-10 flex aspect-square h-auto w-full animate-pulse items-center justify-center bg-background"},mt={key:1,class:"relative z-10 overflow-hidden border p-5"},yt=["innerHTML"],bt={class:"flex w-full items-center space-x-5"},_t={class:"flex w-full items-center justify-center space-x-2"},gt={class:"flex w-full items-stretch overflow-hidden rounded-xl border border-border"},ht={key:0,class:"flex h-full w-full items-center justify-center bg-muted p-3"},wt=["value"],xt=["value"],Ct={class:"flex w-full flex-col items-center justify-center space-y-3 py-2"},kt={class:"flex w-full items-center space-x-5"},$t=x({__name:"TwoFactorSetupModal",props:ie({requiresConfirmation:{type:Boolean},twoFactorEnabled:{type:Boolean}},{isOpen:{type:Boolean},isOpenModifiers:{}}),emits:["update:isOpen"],setup(l){const{resolvedAppearance:n}=re(),i=l,u=oe(l,"isOpen"),{copy:c,copied:g}=De(),{qrCodeSvg:o,manualSetupKey:v,clearSetupData:y,fetchSetupData:C,errors:V}=I(),A=w(!1),$=w(""),N=W("pinInputContainerRef"),M=K(()=>i.twoFactorEnabled?{title:"Two-Factor Authentication Enabled",description:"Two-factor authentication is now enabled. Scan the QR code or enter the setup key in your authenticator app.",buttonText:"Close"}:A.value?{title:"Verify Authentication Code",description:"Enter the 6-digit code from your authenticator app",buttonText:"Continue"}:{title:"Enable Two-Factor Authentication",description:"To finish enabling two-factor authentication, scan the QR code or enter the setup key in your authenticator app",buttonText:"Continue"}),X=()=>{if(i.requiresConfirmation){A.value=!0,G(()=>{N.value?.querySelector("input")?.focus()});return}y(),u.value=!1},ee=()=>{i.twoFactorEnabled&&y(),A.value=!1,$.value=""};return ne(()=>u.value,async U=>{if(!U){ee();return}o.value||await C()}),(U,f)=>(s(),m(e(Me),{open:u.value,"onUpdate:open":f[5]||(f[5]=b=>u.value=b)},{default:r(()=>[t(e(Le),{class:"sm:max-w-md"},{default:r(()=>[t(e(Pe),{class:"flex items-center justify-center"},{default:r(()=>[a("div",lt,[a("div",it,[a("div",ut,[(s(),d(_,null,T(5,b=>a("div",{key:`col-${b}`,class:"border-r border-border last:border-r-0"})),64))]),a("div",dt,[(s(),d(_,null,T(5,b=>a("div",{key:`row-${b}`,class:"border-b border-border last:border-b-0"})),64))]),t(e(Ae),{class:"relative z-20 size-6 text-foreground"})])]),t(e(Ke),null,{default:r(()=>[p(k(M.value.title),1)]),_:1}),t(e(Ie),{class:"text-center"},{default:r(()=>[p(k(M.value.description),1)]),_:1})]),_:1}),a("div",ct,[A.value?(s(),m(e(q),B({key:1},e(be).form(),{"reset-on-error":"",onFinish:f[3]||(f[3]=b=>$.value=""),onSuccess:f[4]||(f[4]=b=>u.value=!1)}),{default:r(({errors:b,processing:L})=>[a("input",{type:"hidden",name:"code",value:$.value},null,8,xt),a("div",{ref_key:"pinInputContainerRef",ref:N,class:"relative w-full space-y-3"},[a("div",Ct,[t(e(Ne),{id:"otp",modelValue:$.value,"onUpdate:modelValue":f[1]||(f[1]=R=>$.value=R),maxlength:6,disabled:L},{default:r(()=>[t(e(Ue),null,{default:r(()=>[(s(),d(_,null,T(6,R=>t(e(Qe),{key:R,index:R-1},null,8,["index"])),64))]),_:1})]),_:1},8,["modelValue","disabled"]),t(Oe,{message:b?.confirmTwoFactorAuthentication?.code},null,8,["message"])]),a("div",kt,[t(e(h),{type:"button",variant:"outline",class:"w-auto flex-1",onClick:f[2]||(f[2]=R=>A.value=!1),disabled:L},{default:r(()=>[...f[7]||(f[7]=[p(" Back ",-1)])]),_:1},8,["disabled"]),t(e(h),{type:"submit",class:"w-auto flex-1",disabled:L||$.value.length<6},{default:r(()=>[...f[8]||(f[8]=[p(" Confirm ",-1)])]),_:1},8,["disabled"])])],512)]),_:1},16)):(s(),d(_,{key:0},[e(V)?.length?(s(),m(Z,{key:0,errors:e(V)},null,8,["errors"])):(s(),d(_,{key:1},[a("div",ft,[a("div",pt,[e(o)?(s(),d("div",mt,[a("div",{innerHTML:e(o),class:"flex aspect-square size-full items-center justify-center",style:le({filter:e(n)==="dark"?"invert(1) brightness(1.5)":void 0})},null,12,yt)])):(s(),d("div",vt,[t(e(H),{class:"size-6"})]))])]),a("div",bt,[t(e(h),{class:"w-full",onClick:X},{default:r(()=>[p(k(M.value.buttonText),1)]),_:1})]),f[6]||(f[6]=a("div",{class:"relative flex w-full items-center justify-center"},[a("div",{class:"absolute inset-0 top-1/2 h-px w-full bg-border"}),a("span",{class:"relative bg-card px-2 py-1"},"or, enter the code manually")],-1)),a("div",_t,[a("div",gt,[e(v)?(s(),d(_,{key:1},[a("input",{type:"text",readonly:"",value:e(v),class:"h-full w-full bg-background p-3 text-foreground"},null,8,wt),a("button",{onClick:f[0]||(f[0]=b=>e(c)(e(v)||"")),class:"relative block h-auto border-l border-border px-3 hover:bg-muted"},[e(g)?(s(),m(e(He),{key:0,class:"w-4 text-green-500"})):(s(),m(e(Je),{key:1,class:"w-4"}))])],64)):(s(),d("div",ht,[t(e(H))]))])])],64))],64))])]),_:1})]),_:1},8,["open"]))}}),J=x({__name:"Badge",props:{asChild:{type:Boolean},as:{},variant:{},class:{}},setup(l){const n=l,i=Be(n,"class");return(u,c)=>(s(),m(e(Ce),B({"data-slot":"badge",class:e(O)(e(St)({variant:l.variant}),n.class)},e(i)),{default:r(()=>[D(u.$slots,"default")]),_:3},16,["class"]))}}),St=Y("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),Ft={class:"space-y-6"},Tt={key:0,class:"flex flex-col items-start justify-start space-y-4"},At={key:1,class:"flex flex-col items-start justify-start space-y-4"},Rt={class:"relative inline"},_a=x({__name:"TwoFactor",props:{requiresConfirmation:{type:Boolean,default:!1},twoFactorEnabled:{type:Boolean,default:!1}},setup(l){const n=[{title:"Two-Factor Authentication",href:_e.url()}],{hasSetupData:i,clearTwoFactorAuthData:u}=I(),c=w(!1);return ue(()=>{u()}),(g,o)=>(s(),m(We,{breadcrumbs:n},{default:r(()=>[t(e(de),{title:"Two-Factor Authentication"}),o[10]||(o[10]=a("h1",{class:"sr-only"},"Two-Factor Authentication Settings",-1)),t(ge,null,{default:r(()=>[a("div",Ft,[t(he,{variant:"small",title:"Two-Factor Authentication",description:"Manage your two-factor authentication settings"}),l.twoFactorEnabled?(s(),d("div",At,[t(e(J),{variant:"default"},{default:r(()=>[...o[7]||(o[7]=[p("Enabled",-1)])]),_:1}),o[9]||(o[9]=a("p",{class:"text-muted-foreground"}," With two-factor authentication enabled, you will be prompted for a secure, random pin during login, which you can retrieve from the TOTP-supported application on your phone. ",-1)),t(nt),a("div",Rt,[t(e(q),ce(fe(e(xe).form())),{default:r(({processing:v})=>[t(e(h),{variant:"destructive",type:"submit",disabled:v},{default:r(()=>[t(e(Re)),o[8]||(o[8]=p(" Disable 2FA ",-1))]),_:1},8,["disabled"])]),_:1},16)])])):(s(),d("div",Tt,[t(e(J),{variant:"destructive"},{default:r(()=>[...o[3]||(o[3]=[p("Disabled",-1)])]),_:1}),o[6]||(o[6]=a("p",{class:"text-muted-foreground"}," When you enable two-factor authentication, you will be prompted for a secure pin during login. This pin can be retrieved from a TOTP-supported application on your phone. ",-1)),a("div",null,[e(i)?(s(),m(e(h),{key:0,onClick:o[0]||(o[0]=v=>c.value=!0)},{default:r(()=>[t(e(Q)),o[4]||(o[4]=p("Continue Setup ",-1))]),_:1})):(s(),m(e(q),B({key:1},e(we).form(),{onSuccess:o[1]||(o[1]=v=>c.value=!0)}),{default:r(({processing:v})=>[t(e(h),{type:"submit",disabled:v},{default:r(()=>[t(e(Q)),o[5]||(o[5]=p("Enable 2FA",-1))]),_:1},8,["disabled"])]),_:1},16))])])),t($t,{isOpen:c.value,"onUpdate:isOpen":o[2]||(o[2]=v=>c.value=v),requiresConfirmation:l.requiresConfirmation,twoFactorEnabled:l.twoFactorEnabled},null,8,["isOpen","requiresConfirmation","twoFactorEnabled"])])]),_:1})]),_:1}))}});export{_a as default};
