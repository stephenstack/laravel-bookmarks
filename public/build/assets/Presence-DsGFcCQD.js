import{a7 as M,a6 as C,ae as I,a as v,w as y,C as T,D as S,q as O,d as x,E as P,z as U,A as $}from"./app-Cnu1gOwx.js";import{r as b}from"./Primitive-DjESCHKf.js";import{q as j,i as D,u as R}from"./index-C95YMyaC.js";function _(e,t){const r=typeof e=="string"&&!t?`${e}Context`:t,o=Symbol(r);return[i=>{const s=M(o,i);if(s||s===null)return s;throw new Error(`Injection \`${o.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},i=>(C(o,i),i)]}function K(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function V(e){return e==null}const[Y]=_("ConfigProvider");function G(e,t="reka"){return`${t}-${I?.()}`}function F(e,t){const r=v(e);function o(c){return t[r.value][c]??r.value}return{state:r,dispatch:c=>{r.value=o(c)}}}function L(e,t){const r=v({}),o=v("none"),f=v(e),c=e.value?"mounted":"unmounted";let i;const s=t.value?.ownerDocument.defaultView??j,{state:m,dispatch:u}=F(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),a=n=>{if(D){const l=new CustomEvent(n,{bubbles:!1,cancelable:!1});t.value?.dispatchEvent(l)}};y(e,async(n,l)=>{const A=l!==n;if(await T(),A){const N=o.value,d=h(t.value);n?(u("MOUNT"),a("enter"),d==="none"&&a("after-enter")):d==="none"||d==="undefined"||r.value?.display==="none"?(u("UNMOUNT"),a("leave"),a("after-leave")):l&&N!==d?(u("ANIMATION_OUT"),a("leave")):(u("UNMOUNT"),a("after-leave"))}},{immediate:!0});const p=n=>{const l=h(t.value),A=l.includes(CSS.escape(n.animationName)),N=m.value==="mounted"?"enter":"leave";if(n.target===t.value&&A&&(a(`after-${N}`),u("ANIMATION_END"),!f.value)){const d=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",i=s?.setTimeout(()=>{t.value?.style.animationFillMode==="forwards"&&(t.value.style.animationFillMode=d)})}n.target===t.value&&l==="none"&&u("ANIMATION_END")},E=n=>{n.target===t.value&&(o.value=h(t.value))},w=y(t,(n,l)=>{n?(r.value=getComputedStyle(n),n.addEventListener("animationstart",E),n.addEventListener("animationcancel",p),n.addEventListener("animationend",p)):(u("ANIMATION_END"),i!==void 0&&s?.clearTimeout(i),l?.removeEventListener("animationstart",E),l?.removeEventListener("animationcancel",p),l?.removeEventListener("animationend",p))},{immediate:!0}),g=y(m,()=>{const n=h(t.value);o.value=m.value==="mounted"?n:"none"});return S(()=>{w(),g()}),{isPresent:O(()=>["mounted","unmountSuspended"].includes(m.value))}}function h(e){return e&&getComputedStyle(e).animationName||"none"}var H=x({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:r}){const{present:o,forceMount:f}=P(e),c=v(),{isPresent:i}=L(o,c);r({present:i});let s=t.default({present:i.value});s=b(s||[]);const m=$();if(s&&s?.length>1){const u=m?.parent?.type.name?`<${m.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${u}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(a=>`  - ${a}`).join(`
`)].join(`
`))}return()=>f.value||o.value||i.value?U(t.default({present:i.value})[0],{ref:u=>{const a=R(u);return typeof a?.hasAttribute>"u"||(a?.hasAttribute("data-reka-popper-content-wrapper")?c.value=a.firstElementChild:c.value=a),a}}):null}});export{H as P,Y as a,_ as c,K as g,V as i,G as u};
