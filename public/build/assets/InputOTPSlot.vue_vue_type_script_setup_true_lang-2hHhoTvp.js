import{a as Q,u as _e}from"./useForwardPropsEmits-C3hZV6IK.js";import{c as ee}from"./utils-B2lt5qvW.js";import{$ as Ee,a0 as ue,a1 as Be,a as I,w as K,a2 as Ce,a3 as Te,G as Z,y as le,u as y,q as T,E as se,W as $,a4 as D,d as H,Z as Ae,B as ce,D as pe,a5 as Me,a6 as De,c as N,e as de,k as fe,i as z,r as te,V as q,n as Oe,H as Re,F as We,_ as ie,a7 as Ve,z as Fe,o as V,f as Ie,K as $e,L as He,j as je,t as Le}from"./app-DNu05MVj.js";import{r as ne}from"./index-BSvhixD8.js";function Ge(e){return Ce()?(Te(e),!0):!1}function ze(e){if(!Z(e))return le(e);const l=new Proxy({},{get(o,t,r){return y(Reflect.get(e.value,t,r))},set(o,t,r){return Z(e.value[t])&&!Z(r)?e.value[t].value=r:e.value[t]=r,!0},deleteProperty(o,t){return Reflect.deleteProperty(e.value,t)},has(o,t){return Reflect.has(e.value,t)},ownKeys(){return Object.keys(e.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return le(l)}function Ne(e){return ze(T(e))}function Ke(e,...l){const o=l.flat(),t=o[0];return Ne(()=>Object.fromEntries(typeof t=="function"?Object.entries(se(e)).filter(([r,s])=>!t($(s),r)):Object.entries(se(e)).filter(r=>!o.includes(r[0]))))}const ve=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const qe=Object.prototype.toString,Ue=e=>qe.call(e)==="[object Object]",Xe=()=>{};function J(e){return Array.isArray(e)?e:[e]}function Ye(...e){if(e.length!==1)return Ee(...e);const l=e[0];return typeof l=="function"?ue(Be(()=>({get:l,set:Xe}))):I(l)}function Ze(e,l,o){return K(e,l,{...o,immediate:!0})}const me=ve?window:void 0,M=ve?window.document:void 0;function Je(e){var l;const o=$(e);return(l=o?.$el)!=null?l:o}function Qe(...e){const l=[],o=()=>{l.forEach(i=>i()),l.length=0},t=(i,p,d,v)=>(i.addEventListener(p,d,v),()=>i.removeEventListener(p,d,v)),r=T(()=>{const i=J($(e[0])).filter(p=>p!=null);return i.every(p=>typeof p!="string")?i:void 0}),s=Ze(()=>{var i,p;return[(p=(i=r.value)==null?void 0:i.map(d=>Je(d)))!=null?p:[me].filter(d=>d!=null),J($(r.value?e[1]:e[0])),J(y(r.value?e[2]:e[1])),$(r.value?e[3]:e[2])]},([i,p,d,v])=>{if(o(),!i?.length||!p?.length||!d?.length)return;const m=Ue(v)?{...v}:v;l.push(...i.flatMap(c=>p.flatMap(g=>d.map(w=>t(c,g,w,m)))))},{flush:"post"}),h=()=>{s(),o()};return Ge(o),h}function et(e,l){const o=D(l);return K(Ye(e),(t,r)=>{o.value=r},{flush:"sync"}),ue(o)}const tt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,nt=H({props:{fallback:{type:String,required:!0}},setup(e){return()=>Fe("noscript",{innerHTML:`<style>${e.fallback}</style>`})}}),ge=Symbol("vue-otp-context");function at(e){return[setTimeout(e,0),setTimeout(e,10),setTimeout(e,50)]}const ot=18,he=40,rt=`${he}px`,lt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function st({containerRef:e,inputRef:l,pushPasswordManagerStrategy:o,isFocused:t}){const r=I({done:!1,refocused:!1}),s=I(!1),h=I(!1),i=I(!1),p=T(()=>o==="none"?!1:(o==="increase-width"||o==="experimental-no-flickering")&&s.value&&h.value),d=()=>{const c=e.value,g=l.value;if(!c||!g||i.value||o==="none")return;const w=c,k=w.getBoundingClientRect().left+w.offsetWidth,x=w.getBoundingClientRect().top+w.offsetHeight/2,_=k-ot,F=x;if(!(document.querySelectorAll(lt).length===0&&document.elementFromPoint(_,F)===c)&&(s.value=!0,i.value=!0,!r.value.refocused&&document.activeElement===g)){const O=[g.selectionStart,g.selectionEnd];g.blur(),g.focus(),g.setSelectionRange(O[0],O[1]),r.value.refocused=!0}},v=()=>{const c=e.value;!c||o==="none"||(h.value=window.innerWidth-c.getBoundingClientRect().right>=he)};let m;return ce(()=>{v(),m=setInterval(v,1e3)}),pe(()=>{clearInterval(m)}),K([t,l],(c,g,w)=>{const[k,x]=c,_=k||document.activeElement===x;if(o==="none"||!_)return;const F=setTimeout(d,0),O=setTimeout(d,2e3),U=setTimeout(d,5e3),X=setTimeout(()=>{i.value=!0},6e3);w(()=>{clearTimeout(F),clearTimeout(O),clearTimeout(U),clearTimeout(X)})}),{hasPWMBadge:s,willPushPWMBadge:p,PWM_BADGE_SPACE_WIDTH:rt}}const it={style:{position:"absolute",inset:"0","pointer-events":"none"}},ut=["value","data-input-otp-placeholder-shown","data-input-otp-mss","data-input-otp-mse","aria-placeholder","pattern"],ct=H({name:"OTPInput",inheritAttrs:!1,__name:"OTPInput",props:ie({maxlength:{},textAlign:{default:"left"},inputmode:{default:"numeric"},containerClass:{},pushPasswordManagerStrategy:{default:"increase-width"},noScriptCssFallback:{default:tt},defaultValue:{default:""},pasteTransformer:{},accept:{},alt:{},autocomplete:{default:"one-time-code"},autofocus:{type:Boolean},capture:{type:[Boolean,String]},checked:{type:[Boolean,Array,Set]},crossorigin:{},disabled:{type:Boolean},enterKeyHint:{},form:{},formaction:{},formenctype:{},formmethod:{},formnovalidate:{type:Boolean},formtarget:{},height:{},indeterminate:{type:Boolean},list:{},max:{},min:{},minlength:{},multiple:{type:Boolean},name:{},pattern:{},placeholder:{},readonly:{type:Boolean},required:{type:Boolean},size:{},src:{},step:{},type:{},value:{},width:{}},{modelValue:{default(e){return e.defaultValue}},modelModifiers:{}}),emits:ie(["complete","change","select","input","focus","blur","mouseover","mouseleave","paste"],["update:modelValue"]),setup(e,{expose:l,emit:o}){const t=e,r=o,[s]=Ae(e,"modelValue"),h=et(s),i=T(()=>t.pattern?typeof t.pattern=="string"?new RegExp(t.pattern):t.pattern:null),p=D(!1),d=D(!1),v=D(null),m=D(null),c=D(null),g=D(null),w=me?.CSS?.supports?.("-webkit-touch-callout","none");let k={prev:[c.value?.selectionStart,c.value?.selectionEnd,c.value?.selectionDirection]};function x(a,n){try{a.insertRule(n)}catch{console.error("input-otp could not insert CSS rule:",n)}}ce(()=>{const a=c.value,n=g.value;if(!a||!n)return;k.prev=[a.selectionStart,a.selectionEnd,a.selectionDirection??"none"];const u=Qe(M,"selectionchange",b,{capture:!0});function b(){if(!a)return;if(M?.activeElement!==a){v.value=null,m.value=null;return}const f=a.selectionStart,P=a.selectionEnd,j=a.selectionDirection,L=a.maxLength,G=a.value,R=k.prev;let B=-1,C=-1,W;if(G.length!==0&&f!==null&&P!==null){const xe=f===P,Pe=f===G.length&&G.length<L;if(xe&&!Pe){const A=f;if(A===0)B=0,C=1,W="forward";else if(A===L)B=A-1,C=A,W="backward";else if(L>1&&G.length>1){let Y=0;if(R[0]!==null&&R[1]!==null){W=A<R[1]?"backward":"forward";const ke=R[0]===R[1]&&R[0]<L;W==="backward"&&!ke&&(Y=-1)}B=Y+A,C=Y+A+1}}B!==-1&&C!==-1&&B!==C&&a.setSelectionRange(B,C,W)}const oe=B!==-1?B:f,re=C!==-1?C:P,we=W??j;v.value=oe,m.value=re,k.prev=[oe,re,we]}if(b(),M?.activeElement===a&&(d.value=!0),!M?.getElementById("input-otp-style")){const f=M?.createElement("style");if(f.id="input-otp-style",M?.head.appendChild(f),f.sheet){const P="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";x(f.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),x(f.sheet,`[data-input-otp]:autofill { ${P} }`),x(f.sheet,`[data-input-otp]:-webkit-autofill { ${P} }`),x(f.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),x(f.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}const S=()=>{n&&n.style.setProperty("--root-height",`${a.clientHeight}px`)};S();const E=new ResizeObserver(S);E.observe(a),pe(()=>{u(),E.disconnect()})}),K([s],()=>{at(()=>{if(!c.value)return;c.value?.dispatchEvent(new Event("input"));const a=c.value?.selectionStart,n=c.value?.selectionEnd,u=c.value?.selectionDirection;a!==null&&n!==null&&(v.value=a??null,m.value=n??null,k.prev=[a,n,u])})},{immediate:!0}),Me(()=>{h.value!==void 0&&s.value!==h.value&&h.value.length<t.maxlength&&s.value.length===t.maxlength&&r("complete",s.value)});const _=st({containerRef:g,inputRef:c,pushPasswordManagerStrategy:t.pushPasswordManagerStrategy,isFocused:d});function F(a){if(a.inputType==="insertText"&&a.data!==null){const n=a.currentTarget,u=n.selectionStart??0,b=n.selectionEnd??0,S=n.value,E=(u!==b?S.slice(0,u)+a.data+S.slice(b):S.slice(0,u)+a.data+S.slice(u)).slice(0,t.maxlength);E.length>0&&i.value&&!i.value.test(E)&&a.preventDefault()}}function O(a){const n=a.currentTarget.value.slice(0,t.maxlength);if(n.length>0&&i.value&&!i.value.test(n)){a.preventDefault();return}typeof h.value=="string"&&n.length<h.value.length&&M?.dispatchEvent(new Event("selectionchange")),s.value=n,r("input",n)}function U(){const a=c.value;if(a){const n=Math.min(a.value.length,t.maxlength-1),u=a.value.length;a.setSelectionRange(n,u),v.value=n,m.value=u}d.value=!0}function X(a){const n=c.value;if(!n||!t.pasteTransformer&&(!w||!a.clipboardData||!n))return;const u=a?.clipboardData?.getData("text/plain"),b=t?.pasteTransformer?t.pasteTransformer(u):u;a.preventDefault();const S=c.value?.selectionStart,E=c.value?.selectionEnd,f=(S!==E?s.value.slice(0,S)+b+s.value.slice(E):s.value.slice(0,S)+b+s.value.slice(S)).slice(0,t.maxlength);if(f.length>0&&i.value&&!i.value.test(f))return;s.value=f,r("input",f);const P=Math.min(f.length,t.maxlength-1),j=f.length;n?.setSelectionRange(P,j),v.value=P,m.value=j}const ye=Q(Ke(t,"containerClass","value","pattern","defaultValue","pushPasswordManagerStrategy","noScriptCssFallback","modelValue")),be=T(()=>({position:"relative",cursor:t.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"})),Se=T(()=>({position:"absolute",inset:0,width:_.willPushPWMBadge.value?`calc(100% + ${_.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:_.willPushPWMBadge.value?`inset(0 ${_.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:t.textAlign,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"})),ae=T(()=>({slots:Array.from({length:Number(t.maxlength)}).map((a,n)=>{const u=d.value&&v.value!==null&&m.value!==null&&(v.value===m.value&&n===v.value||n>=v.value&&n<m.value),b=s.value[n]!==void 0?s.value[n]:null;return{char:b,placeholderChar:b??t?.placeholder?.[n]??null,isActive:u,hasFakeCaret:u&&b===null}}),isFocused:d.value,isHovering:!t.disabled&&p.value}));return De(ge,ae),l(Object.defineProperty({},"$el",{enumerable:!0,configurable:!0,get:()=>c})),(a,n)=>(V(),N(We,null,[e.noScriptCssFallback!==null?(V(),de(y(nt),{key:0,fallback:e.noScriptCssFallback},null,8,["fallback"])):fe("v-if",!0),z("div",{ref_key:"containerRef",ref:g,"data-input-otp-container":"",style:Re(be.value),class:Oe(e.containerClass)},[te(a.$slots,"default",{slots:ae.value.slots,isFocused:d.value,isHovering:!e.disabled&&p.value}),z("div",it,[z("input",q({ref_key:"inputRef",ref:c,value:y(s),"data-input-otp":"","data-input-otp-placeholder-shown":y(s).length===0||void 0,"data-input-otp-mss":v.value,"data-input-otp-mse":m.value,"aria-placeholder":e.placeholder,style:Se.value,pattern:i.value?.source},{...a.$attrs,...y(ye)},{onBeforeinput:F,onMouseover:n[0]||(n[0]=u=>{p.value=!0,r("mouseover",u)}),onMouseleave:n[1]||(n[1]=u=>{p.value=!1,r("mouseleave",u)}),onPaste:n[2]||(n[2]=u=>{X(u),r("paste",u)}),onInput:O,onFocus:n[3]||(n[3]=u=>{U(),r("focus",u)}),onBlur:n[4]||(n[4]=u=>{d.value=!1,r("blur",u)})}),null,16,ut)])],6)],64))}});var pt=ct;function dt(){return Ve(ge)}const bt=H({__name:"InputOTP",props:{maxlength:{},textAlign:{},inputmode:{},containerClass:{},pushPasswordManagerStrategy:{},noScriptCssFallback:{},defaultValue:{},pasteTransformer:{type:Function},accept:{},alt:{},autocomplete:{},autofocus:{type:Boolean},capture:{type:[Boolean,String]},checked:{type:[Boolean,Array,Set]},crossorigin:{},disabled:{type:Boolean},enterKeyHint:{},form:{},formaction:{},formenctype:{},formmethod:{},formnovalidate:{type:Boolean},formtarget:{},height:{},indeterminate:{type:Boolean},list:{},max:{},min:{},minlength:{},multiple:{type:Boolean},name:{},pattern:{},placeholder:{},readonly:{type:Boolean},required:{type:Boolean},size:{},src:{},step:{},type:{},value:{},width:{},class:{}},emits:["complete","change","select","input","focus","blur","mouseover","mouseleave","paste"],setup(e,{emit:l}){const o=e,t=l,r=ne(o,"class"),s=_e(r,t);return(h,i)=>(V(),de(y(pt),q(y(s),{"container-class":y(ee)("flex items-center gap-2 has-disabled:opacity-50",o.class),"data-slot":"input-otp",class:"disabled:cursor-not-allowed"}),{default:Ie(p=>[te(h.$slots,"default",$e(He(p)))]),_:3},16,["container-class"]))}}),St=H({__name:"InputOTPGroup",props:{class:{}},setup(e){const l=e,o=ne(l,"class"),t=Q(o);return(r,s)=>(V(),N("div",q({"data-slot":"input-otp-group"},y(t),{class:y(ee)("flex items-center",l.class)}),[te(r.$slots,"default")],16))}}),ft=["data-active"],vt={key:0,class:"pointer-events-none absolute inset-0 flex items-center justify-center"},wt=H({__name:"InputOTPSlot",props:{index:{},class:{}},setup(e){const l=e,o=ne(l,"class"),t=Q(o),r=dt(),s=T(()=>r?.value.slots[l.index]);return(h,i)=>(V(),N("div",q(y(t),{"data-slot":"input-otp-slot","data-active":s.value?.isActive,class:y(ee)("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",l.class)}),[je(Le(s.value?.char)+" ",1),s.value?.hasFakeCaret?(V(),N("div",vt,[...i[0]||(i[0]=[z("div",{class:"animate-caret-blink bg-foreground h-4 w-px duration-1000"},null,-1)])])):fe("",!0)],16,ft))}});export{bt as _,St as a,wt as b};
